---
layout: post
title: "Hardware"
author: "Zach White"
image: google-first-rack.jpg
---

As I hinted in my last post, I've had a chance to dig into hardware a bit. I did a lot of research online, and mostly found information that confirmed my prior assumptions. That always makes me suspicious, but honestly I think hardware matters less than it ever did at this point. For most situations and workloads, pretty much any hardware with enough ram and storage is "good enough".

The classic move for someone in my situation is to pick up a single x86 machine and use proxmox to spin up 7 VMs, 3 for a Control Plane and 4 for your workers running Ceph Rook and some workloads. You can expand to multiple x86 machines from there if you need to spin up more than your x86 machine can handle.

Another popular option is to use some sort of ARM SBC, like a Raspberry Pi. In fact, going with a Raspberry Pi is attractive because they have a robust ecosystem and all of the underlying software is well tested on the hardware. However, there are other interesting options if you go beyond the Pi. Turing Pi has a really neat ITX board that accepts 4 of their blades, but unfortunately the peripheral vary too much to build the kind of cluster I want. However, that turned me onto the Rockchip based boards, of which there are quite a few interesting boards to choose from.

To make a long story short, the most interesting board I found was the Orange Pi 5 Plus. It comes with 8 cores, half of them Cortex A76 and the other half A55, 16gb of RAM, two 2.5gb NICs, an M.2 slot for an SSD AND an M.2 slot I can put a SATA interface on. My only concern is the software ecosystem, fewer OSes support the Orange Pi boards. However, it's hard to beat the value in these compared to the Raspberry Pi 5.

|  | Raspberry Pi 5 8gb | Orange Pi 5 Plus 16gb |
|--|----------------|------------------|
|Board | $90 | $152 |
| Heatsinks | $10 | $8 |
| M.2 HAT | $20 | - |
| 1TB NVMe | $90 | $50 |
| SATA Adaptor | $22 | $25 |
| 2 x 2TB SATA SSD | $210 | $210 |
| **Total** | $442 | $445 |

As you can see, by the time you've built out each configuration you're looking at pretty much the same cost per node. The added cost (and complexity) of the Raspberry Pi is due to the M.2 hat only accepting 2230 and 2242 M.2 cards. These compact cards are more expensive for larger storage sizes. 

But what kind of performance difference are we looking at? I didn't run a robust set of test suites or anything, but I did install DietPi on each system and do some benchmarking. Unfortunately I accidentally deleted the file with the results, but on the whole I was getting 2-3x faster CPU with the Orange Pi and about 40% faster I/O on the NVMe. I haven't compared SATA directly, but the Raspberry Pi is using USB-3 SATA adaptors vs the Orange Pi's M.2 SATA adaptors, so my gut says the Orange Pi will be at least 20% faster here. I will do some comparisons once I actually get the hardware setup.

So that's my hardware figured out. In my next post I will be talking about how I am going to package all of this hardware up in a functional and aesthetically pleasing form.
